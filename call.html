<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">

    <!-- viewport meta -->
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">



    <title>電話アプリ</title>

    <style>
      #view{
        width:100vw;
        height:150vh;
        background:grey;
        position:relative;
      }
      #screen{
        background:white;
        width:768px;
        height:1024px;
        position:absolute;
        top: 50%;
        left: 50%;
        -ms-transform: translate(-50%,-50%);
        -webkit-transform : translate(-50%,-50%);
        transform : translate(-50%,-50%);
        box-shadow:5px 5px 5px;

      }
      #input-number-container{
        height:200px;
        width:100%;
        position:relative;
        overflow:hidden;
      }
      #input-number{
        position:absolute;
        display:block;
        width:100%;
        top:50%;
        -ms-transform: translateY(-50%);
        -webkit-transform : translateY(-50%);
        transform : translateY(-50%);

        border-radius:10px;
        /*background:rgba(200,200,200,0.4);*/

        text-align:center;
        font-size:50px;
        letter-spacing:10px;
      }
      #flex-container{
        display:flex;
        flex-flow:row wrap;
        justify-content:flex-start;
        align-content:space-around;

        background:white;
        width:60%;
        height:650px;
        margin:auto;
      }


      .flex-content{
        flex-basis:33%;
        height:110px;
        position:relative;
      }
      .b{
        position:absolute;
        top: 50%;
        left: 50%;
        -ms-transform: translate(-50%,-50%);
        -webkit-transform : translate(-50%,-50%);
        transform : translate(-50%,-50%);

        height:105px;
        width:105px;
        border-radius:50%;
        background:#EEEEEE;
        font-weight:400;
        font-size:45px;
      }
      .b:active{
        background:#999999;
      }
      #callButton{
        background:rgb(59,234,88);
      }

      #calling-screen{
        position:absolute;
        background:white;
        height:100%;
        width:100%;
        top:0;
        left:0;
        text-align:center;

        padding-top:300px;

        display:none;
      }
      #calling-screen>span{
        vertical-align:middle;
        font-size:30px;
      }
    </style>

  </head>
  <body>

    <div id="view">
        <div id="screen">
          <div id="input-number-container">
            <span id="input-number"></span>
          </div>
          <div id="flex-container">
            <div class="flex-content">
              <button class="b" onclick="tap1()">1</button>
            </div>
            <div class="flex-content">
              <button class="b" onclick="tap2()">2</button>
            </div>
            <div class="flex-content">
              <button class="b" onclick="tap3()">3</button>
            </div>
            <div class="flex-content">
              <button class="b" onclick="tap4()">4</button>
            </div>
            <div class="flex-content">
              <button class="b" onclick="tap5()">5</button>
            </div>
            <div class="flex-content">
              <button class="b" onclick="tap6()">6</button>
            </div>
            <div class="flex-content">
              <button class="b" onclick="tap7()">7</button>
            </div>
            <div class="flex-content">
              <button class="b" onclick="tap8()">8</button>
            </div>
            <div class="flex-content">
              <button class="b" onclick="tap9()">9</button>
            </div>
            <div class="flex-content">
              <button class="b" onclick="tapA()">＊</button>
            </div>
            <div class="flex-content">
              <button class="b" onclick="tap0()">0</button>
            </div>
            <div class="flex-content">
              <button class="b" onclick="tapS()">#</button>
            </div>
            <div class="flex-content">
            </div>
            <div class="flex-content">
              <button id="callButton" class="b" onclick="tapCall()">call</button>
            </div>
            <div class="flex-content">
              <button id="deleteButton" style="display:none"class="b" onclick="tapDelete()">x</button>
            </div>
          </div>
          <div id="calling-screen">
            <span>
              ただいま電話中です<br>
              <button onclick="cancelCalling()">戻る</button>
            </span>
          </div>
        </div>
      </div>


    <script>

      var number="";
      var deleteButton = document.getElementById("deleteButton");

      var audioElem = new Audio();
      audioElem.src = "ima.m4a";


      function showDeleteButton(show){
        if(show){
          deleteButton.style.display = "inline-block";
        }else{
          deleteButton.style.display = "none"
        }
      }

      function reflectNumber(){
        var screen_number = document.getElementById("input-number");
        screen_number.textContent = number;
        if(number != 0){
          showDeleteButton(true);
        }else{
          showDeleteButton(false);
        }
      }

      function tap1(){
        number = number+1;
        reflectNumber();
      }
      function tap2(){
        number = number+2;
        reflectNumber();
      }
      function tap3(){
        number = number+3;
        reflectNumber();
      }
      function tap4(){
        number = number+4;
        reflectNumber();
      }
      function tap5(){
        number = number+5;
        reflectNumber();
      }
      function tap6(){
        number = number+6;
        reflectNumber();
      }
      function tap7(){
        number = number+7;
        reflectNumber();
      }
      function tap8(){
        number = number+8;
        reflectNumber();
      }
      function tap9(){
        number = number+9;
        reflectNumber();
      }
      function tap0(){
        number = number+0;
        reflectNumber();
      }
      function tapA(){
        number = number + "*";
        reflectNumber();
      }
      function tapS(){
        number = number + "#";
        reflectNumber();
      }
      function tapDelete(){
        number = number.slice(0,-1);;
        reflectNumber();
      }

      function tapCall(){
        if(number==119){
          calling_screen = document.getElementById("calling-screen");
          calling_screen.style.display = "block"

          audioElem.play();
        }else{
          alert("電話番号が違います");
          number = "";
          reflectNumber()
        }
        
      }
      function cancelCalling(){
        audioElem.pause();
        calling_screen = document.getElementById("calling-screen");
        calling_screen.style.display = "none";
        number = "";
        reflectNumber();
      }
    </script>
      
  </body>
</html>